<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SamPack Order</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --bg: #f8f9fa; --text: #333; --unit-color: #0d47a1; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: var(--bg); margin: 0; padding-bottom: 100px; color: var(--text); -webkit-tap-highlight-color: transparent; }
        
        /* Header */
        .header { background: white; padding: 15px; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; }
        .logo { font-weight: 800; font-size: 1.3rem; color: var(--primary); display: flex; align-items: center; gap: 5px; }
        .lang-switch button { padding: 6px 12px; border: 1px solid var(--primary); background: white; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9rem; }
        .lang-switch button.active { background: var(--primary); color: white; }

        /* Search & Filter */
        .tools-container { max-width: 800px; margin: 15px auto 5px; padding: 0 15px; }
        .search-box { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 1rem; box-sizing: border-box; margin-bottom: 10px; outline: none; }
        .search-box:focus { border-color: var(--accent); }
        
        .filter-scroll { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
        .filter-scroll::-webkit-scrollbar { display: none; }
        .filter-btn { padding: 8px 16px; background: white; border: 1px solid #ddd; border-radius: 20px; white-space: nowrap; cursor: pointer; font-size: 0.9rem; color: #555; }
        .filter-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Products */
        .container { max-width: 800px; margin: 0 auto; padding: 0 15px; }
        .product-card { background: white; border-radius: 16px; padding: 15px; margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 8px rgba(0,0,0,0.04); border: 1px solid transparent; transition: border 0.2s; }
        .product-card.in-cart { border-color: var(--accent); background: #fdfdfd; }
        
        .prod-info { flex: 1; min-width: 0; }
        .prod-name { font-weight: 700; font-size: 1rem; margin-bottom: 4px; line-height: 1.3; }
        
        .prod-detail { font-size: 0.85rem; color: #888; display: flex; align-items: center; gap: 8px; }
        .prod-code { background: #eee; padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; color: #555; }
        
        /* Unit Style (Blue) */
        .prod-unit { color: var(--unit-color); font-weight: 900; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; }
        
        .prod-price { color: var(--accent); font-weight: 800; font-size: 1.1rem; margin-top: 6px; }

        /* Controls */
        .controls { display: flex; align-items: center; gap: 5px; background: #f1f3f5; padding: 4px; border-radius: 12px; }
        .btn-qty { width: 36px; height: 36px; border: none; background: white; border-radius: 10px; font-size: 20px; color: var(--primary); cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); touch-action: manipulation; }
        .btn-qty:active { transform: scale(0.95); background: #eee; }
        
        /* QUANTITY INPUT STYLE (Blue) */
        .qty-input { width: 40px; height: 36px; border: none; background: transparent; text-align: center; font-weight: 900; font-size: 1.2rem; color: var(--unit-color); -moz-appearance: textfield; padding: 0; }
        .qty-input::-webkit-outer-spin-button, .qty-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
        .qty-input:focus { outline: none; background: #e9ecef; border-radius: 6px; }
        .qty-input::placeholder { color: #ccc; font-weight: normal; } /* Placeholder remains grey */

        /* Cart Bar */
        .cart-bar { position: fixed; bottom: 0; left: 0; right: 0; background: white; border-top: 1px solid #eee; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 -4px 20px rgba(0,0,0,0.08); z-index: 200; backdrop-filter: blur(10px); background: rgba(255,255,255,0.95); }
        .cart-info { display: flex; flex-direction: column; }
        .cart-total { font-weight: 800; font-size: 1.2rem; color: var(--primary); }
        .cart-count { font-size: 0.85rem; color: #777; }
        .btn-checkout { background: var(--accent); color: white; border: none; padding: 12px 30px; border-radius: 30px; font-weight: 700; font-size: 1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4); transition: transform 0.2s; }
        .btn-checkout:active { transform: scale(0.95); }

        /* Modal */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; align-items: flex-end; justify-content: center; backdrop-filter: blur(3px); }
        .modal-content { background: white; width: 100%; max-width: 600px; padding: 25px; border-radius: 20px 20px 0 0; max-height: 90vh; overflow-y: auto; position: relative; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .close-btn { position: absolute; right: 20px; top: 20px; font-size: 28px; color: #aaa; cursor: pointer; line-height: 1; }
        .modal h2 { margin-top: 0; color: var(--primary); }
        
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 700; font-size: 0.9rem; color: #555; }
        .form-group input, .form-group textarea { width: 100%; padding: 14px; border: 2px solid #eee; border-radius: 12px; box-sizing: border-box; font-size: 1rem; transition: border 0.2s; }
        .form-group textarea { resize: vertical; font-family: inherit; }

        .order-summary { background: #f8f9fa; padding: 15px; border-radius: 12px; margin-bottom: 25px; font-size: 0.95rem; max-height: 200px; overflow-y: auto; }
        .summary-row { display: flex; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px dashed #e0e0e0; padding-bottom: 8px; }

        .btn-whatsapp { background: #25D366; color: white; width: 100%; padding: 16px; border: none; border-radius: 14px; font-weight: 800; margin-bottom: 12px; cursor: pointer; font-size: 1.1rem; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .btn-email { background: var(--primary); color: white; width: 100%; padding: 16px; border: none; border-radius: 14px; font-weight: 800; cursor: pointer; font-size: 1.1rem; display: flex; align-items: center; justify-content: center; gap: 10px; }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div class="header">
    <div class="logo">ðŸ“¦ SamPack</div>
    <div class="lang-switch">
        <button id="btn-de" class="active" onclick="setLang('de')">DE</button>
        <button id="btn-fr" onclick="setLang('fr')">FR</button>
    </div>
</div>

<div class="tools-container">
    <input type="text" id="searchInput" class="search-box" placeholder="Suchen / Search..." oninput="filterProducts()">
    <div class="filter-scroll" id="categoryFilters"></div>
</div>

<div class="container" id="product-list"></div>

<div class="cart-bar" id="cartBar" style="display:none">
    <div class="cart-info">
        <span class="cart-total"><span id="total-price">0.00</span> CHF</span>
        <span class="cart-count" id="item-count">0 Artikel</span>
    </div>
    <button class="btn-checkout" onclick="openCheckout()" id="lbl-view-cart">Warenkorb ></button>
</div>

<div class="modal" id="checkoutModal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeCheckout()">&times;</span>
        <h2 id="lbl-checkout-title">Bestellung</h2>
        <div class="order-summary" id="order-summary"></div>

        <div class="form-group"><label id="lbl-name">Firma / Name *</label><input type="text" id="customerName" placeholder="..."></div>
        <div class="form-group"><label id="lbl-address">Adresse</label><input type="text" id="customerAddress" placeholder="..."></div>
        <div class="form-group"><label id="lbl-date">Datum</label><input type="date" id="deliveryDate"></div>
        
        <div class="form-group">
            <label id="lbl-note">Bemerkungen / Note</label>
            <textarea id="customerNote" rows="3" placeholder="..."></textarea>
        </div>
        <div class="form-group">
            <label id="lbl-upload">Foto / File (Email Only)</label>
            <input type="file" id="orderAttachment" accept="image/*,application/pdf">
        </div>

        <button class="btn-whatsapp" onclick="sendWhatsapp()">WhatsApp</button>
        <button class="btn-email" onclick="sendEmail()">Email</button>
    </div>
</div>

<script>
    // --- 121 PRODUCTS DATA ---
    const products = [
    { id: "001F", cat: "Food", nameDE: "Pommes, Fine Quality-10 M", nameFR: "Pommes Frites (10mm)", price: 3.6, unit: "Kg" },
    { id: "NC-01", cat: "Food", nameDE: "Chicken Nugget 12 KG", nameFR: "Nuggets de poulet (12kg)", price: 102, unit: "Packung" },
    { id: "NC-02", cat: "Food", nameDE: "Pommes frites -6.6 mm", nameFR: "Pommes frites (6.6mm)", price: 3.2, unit: "Kg" },
    { id: "NC-03", cat: "Food", nameDE: "Cordon Bleu", nameFR: "Cordon Bleu", price: 75, unit: "Packung" },
    { id: "NC-04", cat: "Food", nameDE: "Thunfisch", nameFR: "Thon", price: 25, unit: "Packung" },
    { id: "NC-05", cat: "Food", nameDE: "Schnitzel", nameFR: "Escalope", price: 90, unit: "Packung" },
    { id: "NC-06", cat: "Food", nameDE: "Frittes Ã–L, 10 liter, Rozan", nameFR: "Huile de friture 10L (Rozan)", price: 38, unit: "Stk" },
    { id: "0015", cat: "Packaging", nameDE: "0015- Plastiksack tÃ¼te ,klein", nameFR: "Sac plastique (Petit)", price: 20, unit: "Packung" },
    { id: "002F", cat: "Food", nameDE: "Pommes,Fine Quality-7mm", nameFR: "Pommes Frites (7mm)", price: 3.5, unit: "Kg" },
    { id: "0020", cat: "Packaging", nameDE: "Plastiksack tÃ¼te, Mittlere", nameFR: "Sac plastique (Moyen)", price: 20, unit: "Packung" },
    { id: "003", cat: "Food", nameDE: "Pommes, Fine Quality-10 M", nameFR: "Pommes Frites (10mm)", price: 3.2, unit: "Kg" },
    { id: "004E", cat: "Food", nameDE: "Pommes, Fine Quality-10 M", nameFR: "Pommes Frites (10mm)", price: 3.2, unit: "Kg" },
    { id: "005A", cat: "Food", nameDE: "Pommes Frits, Normal ,9.9 mm", nameFR: "Pommes Frites (9.9mm)", price: 3.3, unit: "Kg" },
    { id: "0050", cat: "Packaging", nameDE: "Plastiksack tÃ¼te ,gross", nameFR: "Sac plastique (Grand)", price: 20, unit: "Packung" },
    { id: "006A", cat: "Food", nameDE: "Pommes, Fine Quality-10 M", nameFR: "Pommes Frites (10mm)", price: 3.5, unit: "Kg" },
    { id: "007", cat: "Food", nameDE: "Mozzarella, 45 % Fett-12 Kg", nameFR: "Mozzarella 45% (12kg)", price: 72, unit: "Packung" },
    { id: "007S", cat: "Food", nameDE: "Mozzarella, 100 % Fett, 12 Kg", nameFR: "Mozzarella 100% (12kg)", price: 78, unit: "Packung" },
    { id: "NC-07", cat: "Food", nameDE: "HÃ¤nchen Brust-12 kg", nameFR: "Poitrine de poulet (12kg)", price: 94, unit: "Packung" },
    { id: "0981", cat: "Packaging", nameDE: "Bulky Servietten , Rot Farbe-40x40 2 ply", nameFR: "Serviettes Bulky Rouge (40x40)", price: 50, unit: "Packung" },
    { id: "0990", cat: "Packaging", nameDE: "Serviette", nameFR: "Serviette", price: 29, unit: "Packung" },
    { id: "0998", cat: "Packaging", nameDE: "Serviette 1/8 Take Away", nameFR: "Serviette 1/8 Take Away", price: 25, unit: "Packung" },
    { id: "1002", cat: "Packaging", nameDE: "Papierhandtuch", nameFR: "Essuie-mains papier", price: 30, unit: "Packung" },
    { id: "1003", cat: "Packaging", nameDE: "Rollenpapier - 6 Rollen", nameFR: "Rouleau papier (6 pcs)", price: 19, unit: "Packung" },
    { id: "1004", cat: "Packaging", nameDE: "Rollenpapier - 12 Rollen", nameFR: "Rouleau papier (12 pcs)", price: 20, unit: "Packung" },
    { id: "1005", cat: "Packaging", nameDE: "Toilette Papier", nameFR: "Papier toilette", price: 20, unit: "Packung" },
    { id: "1006", cat: "Packaging", nameDE: "KÃ¼chen Rollen, 32 St", nameFR: "Rouleaux cuisine (32 pcs)", price: 33, unit: "Packung" },
    { id: "1050", cat: "Packaging", nameDE: "Donner Box, 16 -Ounce, klein", nameFR: "Doner Box 16oz (Petit)", price: 45, unit: "Packung" },
    { id: "1060", cat: "Packaging", nameDE: "Donner Box, 26-Unzen, mittlere", nameFR: "Doner Box 26oz (Moyen)", price: 45, unit: "Packung" },
    { id: "1070", cat: "Packaging", nameDE: "Donner box, 32 Unzen, GrÃ¶ÃŸe", nameFR: "Doner Box 32oz (Grand)", price: 45, unit: "Packung" },
    { id: "1541", cat: "Packaging", nameDE: "Gabel", nameFR: "Fourchette", price: 30, unit: "Packung" },
    { id: "1676", cat: "Packaging", nameDE: "Lunch-Box-IP 10 WeiÃŸ -", nameFR: "Lunch Box IP 10 Blanc", price: 40, unit: "Packung" },
    { id: "1681", cat: "Packaging", nameDE: "Menu Box, IP 4", nameFR: "Menu Box IP 4", price: 30, unit: "Packung" },
    { id: "1682", cat: "Packaging", nameDE: "Menu Box, IP 4", nameFR: "Menu Box IP 4", price: 30, unit: "Packung" },
    { id: "1683", cat: "Packaging", nameDE: "Menu Box, IP 4", nameFR: "Menu Box IP 4", price: 30, unit: "Packung" },
    { id: "2023", cat: "Food", nameDE: "Remia Cocktail Sauce, 10 Kg", nameFR: "Sauce Cocktail Remia (10kg)", price: 25, unit: "Stk" },
    { id: "2023B", cat: "Packaging", nameDE: "Frischhaltefolie, Breite 30 cm", nameFR: "Film alimentaire (30cm)", price: 40, unit: "Stk" },
    { id: "2023A", cat: "Packaging", nameDE: "Frischhaltefolie, Breite 45 cm", nameFR: "Film alimentaire (45cm)", price: 40, unit: "Stk" },
    { id: "2045", cat: "Packaging", nameDE: "Donner tÃ¼ten", nameFR: "Sachets Doner", price: 17, unit: "Packung" },
    { id: "2046", cat: "Packaging", nameDE: "DÃ¼rÃ¼m TÃ¼te", nameFR: "Sachets DÃ¼rÃ¼m", price: 20, unit: "Packung" },
    { id: "2070", cat: "Packaging", nameDE: "Aluminium Folie 4 StÃ¼ck 14 mm", nameFR: "Feuille Alu (4 pcs, 14mm)", price: 23, unit: "Packung" },
    { id: "2530", cat: "Packaging", nameDE: "Aluminium schale-100 stÃ¼ck, 214x149", nameFR: "Barquette Alu (100 pcs)", price: 37, unit: "Packung" },
    { id: "511", cat: "Packaging", nameDE: "Salat Schale - 375 ml", nameFR: "Bol salade (375ml)", price: 55, unit: "Packung" },
    { id: "NC-08", cat: "Packaging", nameDE: "Airlaid Servietten Rot", nameFR: "Serviettes Airlaid Rouge", price: 130, unit: "Packung" },
    { id: "NC-09", cat: "Packaging", nameDE: "Aluminium box, 2000 cc", nameFR: "BoÃ®te Alu (2000cc)", price: 75, unit: "Packung" },
    { id: "NC-10", cat: "Packaging", nameDE: "Aluminium Box, 2380 cc", nameFR: "BoÃ®te Alu (2380cc)", price: 80, unit: "Packung" },
    { id: "NC-11", cat: "Food", nameDE: "Antalya Brot-9,7 Kg", nameFR: "Pain Antalya (9.7kg)", price: 27, unit: "Packung" },
    { id: "NC-12", cat: "Food", nameDE: "Basilikum", nameFR: "Basilic", price: 20, unit: "Packung" },
    { id: "NC-13", cat: "Packaging", nameDE: "Besteck Taschen", nameFR: "Pochettes couverts", price: 50, unit: "Packung" },
    { id: "NC-14", cat: "Packaging", nameDE: "Besteck-Set", nameFR: "Set couverts", price: 24, unit: "Packung" },
    { id: "NC-15", cat: "Packaging", nameDE: "Bio-Salatschalen, 1000 m", nameFR: "Bol salade Bio (1000ml)", price: 80, unit: "Packung" },
    { id: "NC-16", cat: "Packaging", nameDE: "Bio-Salatschalen, 1300 ml", nameFR: "Bol salade Bio (1300ml)", price: 90, unit: "Packung" },
    { id: "NC-17", cat: "Packaging", nameDE: "Bio-Salatschalen, 375 ml", nameFR: "Bol salade Bio (375ml)", price: 65, unit: "Packung" },
    { id: "NC-18", cat: "Packaging", nameDE: "Bio-Salatschalen, 500 ml", nameFR: "Bol salade Bio (500ml)", price: 50, unit: "Packung" },
    { id: "NC-19", cat: "Packaging", nameDE: "Bio-Salatschalen, 750 ml", nameFR: "Bol salade Bio (750ml)", price: 65, unit: "Packung" },
    { id: "NC-20", cat: "Packaging", nameDE: "Bulky Servietten, 40x40 2 ply", nameFR: "Serviettes Bulky 40x40", price: 50, unit: "Packung" },
    { id: "NC-21", cat: "Food", nameDE: "Chili Feuer - mix 50", nameFR: "Mix Chili Feu 50", price: 20, unit: "Packung" },
    { id: "NC-22", cat: "Food", nameDE: "Chili-Cheese Sauce", nameFR: "Sauce Chili-Cheese", price: 45, unit: "Packung" },
    { id: "NC-23", cat: "Food", nameDE: "Dill", nameFR: "Aneth", price: 17, unit: "Packung" },
    { id: "NC-24", cat: "Packaging", nameDE: "DÃ¼rum TÃ¼te", nameFR: "Sachet DÃ¼rum", price: 25, unit: "Packung" },
    { id: "NC-25", cat: "Food", nameDE: "Falafel", nameFR: "Falafel", price: 45, unit: "Packung" },
    { id: "NC-26", cat: "Packaging", nameDE: "Food Container box", nameFR: "BoÃ®te alimentaire", price: 200, unit: "Packung" },
    { id: "NC-27", cat: "Packaging", nameDE: "Food Container box, 190 x 60 mm", nameFR: "BoÃ®te alimentaire 190x60", price: 200, unit: "Packung" },
    { id: "NC-28", cat: "Packaging", nameDE: "Frischpack zuschnitte", nameFR: "Coupes fraÃ®ches", price: 45, unit: "Packung" },
    { id: "NC-29", cat: "Packaging", nameDE: "Frischpack zuschnitte, 10 kg - 50 Ã— 75 cm", nameFR: "Coupes fraÃ®ches (10kg)", price: 45, unit: "Packung" },
    { id: "NC-30", cat: "Packaging", nameDE: "Frishhaltfolie , normal", nameFR: "Film alimentaire normal", price: 20, unit: "Packung" },
    { id: "NC-31", cat: "Food", nameDE: "Frittes Ã–L, 20 Liter, Rozan-Krton", nameFR: "Huile friture 20L (Rozan Carton)", price: 75, unit: "Stk" },
    { id: "NC-32", cat: "Food", nameDE: "Frittes Ã–L, 20 Liter, Rozan", nameFR: "Huile friture 20L (Rozan)", price: 70, unit: "Stk" },
    { id: "NC-33", cat: "Food", nameDE: "Geschnittene Oliven", nameFR: "Olives tranchÃ©es", price: 39, unit: "Packung" },
    { id: "NC-34", cat: "Packaging", nameDE: "Hamburger Box- papstar", nameFR: "BoÃ®te Hamburger Papstar", price: 37.7, unit: "Packung" },
    { id: "NC-35", cat: "Packaging", nameDE: "Handschuhe-L", nameFR: "Gants (L)", price: 35, unit: "Pakung" },
    { id: "NC-36", cat: "Packaging", nameDE: "Handschuhe-M", nameFR: "Gants (M)", price: 35, unit: "Pakung" },
    { id: "NC-37", cat: "Packaging", nameDE: "Kaffebecher", nameFR: "Gobelet CafÃ©", price: 30, unit: "Pakung" },
    { id: "NC-38", cat: "Packaging", nameDE: "Kaffebecher-esperesso", nameFR: "Gobelet Espresso", price: 30, unit: "Packung" },
    { id: "NC-39", cat: "Food", nameDE: "Ketchup Rozan , 10 Kg", nameFR: "Ketchup Rozan (10kg)", price: 18, unit: "Stk" },
    { id: "NC-40", cat: "Food", nameDE: "Kimyon-KreuzkÃ¼mmel", nameFR: "Cumin", price: 11.9, unit: "Packung" },
    { id: "NC-41", cat: "Food", nameDE: "Knobloch Pulver", nameFR: "Poudre d'ail", price: 20, unit: "Packung" },
    { id: "NC-42", cat: "Packaging", nameDE: "LÃ¶ffel", nameFR: "CuillÃ¨re", price: 30, unit: "Packung" },
    { id: "NC-43", cat: "Packaging", nameDE: "lunch menu box, 375 ml, sichtbar", nameFR: "Lunch Box 375ml (Transparent)", price: 60, unit: "Packung" },
    { id: "NC-44", cat: "Packaging", nameDE: "Lunch menu box, 500 ml, sichtbar", nameFR: "Lunch Box 500ml (Transparent)", price: 60, unit: "Packung" },
    { id: "NC-45", cat: "Packaging", nameDE: "Lunch menu box, 750 ml", nameFR: "Lunch Box 750ml", price: 60, unit: "Packung" },
    { id: "NC-46", cat: "Food", nameDE: "Mayonnaise Rozan , 10 Kg", nameFR: "Mayonnaise Rozan (10kg)", price: 23, unit: "Stk" },
    { id: "NC-47", cat: "Food", nameDE: "Mayonnaise, TanriÃ¶ver , 10 L", nameFR: "Mayonnaise TanriÃ¶ver (10L)", price: 23, unit: "Stk" },
    { id: "NC-48", cat: "Packaging", nameDE: "Plastik Messer", nameFR: "Couteau plastique", price: 29, unit: "Packung" },
    { id: "NC-49", cat: "Food", nameDE: "Oliven Ã–l- 1 Litr", nameFR: "Huile d'olive (1L)", price: 6.5, unit: "Stk" },
    { id: "NC-50", cat: "Food", nameDE: "Oregano", nameFR: "Origan", price: 20, unit: "Packung" },
    { id: "NC-51", cat: "Packaging", nameDE: "Papier Ã  pizza", nameFR: "Papier Pizza", price: 40, unit: "Packung" },
    { id: "NC-52", cat: "Packaging", nameDE: "Papiertasche - Tragetasche - Mittel", nameFR: "Sac papier (Moyen)", price: 28, unit: "Packung" },
    { id: "NC-53", cat: "Packaging", nameDE: "Papiertasche - Tragetasche, klein", nameFR: "Sac papier (Petit)", price: 28, unit: "Packung" },
    { id: "NC-54", cat: "Packaging", nameDE: "Papiertasche - Tragetasche, groÃŸ", nameFR: "Sac papier (Grand)", price: 28, unit: "Packung" },
    { id: "NC-55", cat: "Food", nameDE: "Petersille", nameFR: "Persil", price: 18, unit: "Packung" },
    { id: "NC-56", cat: "Food", nameDE: "Pfeffer schwarz", nameFR: "Poivre noir", price: 18, unit: "Packung" },
    { id: "NC-57", cat: "Food", nameDE: "Pfefferminz", nameFR: "Menthe", price: 18, unit: "Packung" },
    { id: "NC-58", cat: "Packaging", nameDE: "Pizza Box Italy Model : 32 x 32 x 4 cm", nameFR: "BoÃ®te Pizza Italy 32x32", price: 23, unit: "Packung" },
    { id: "NC-59", cat: "Packaging", nameDE: "Pizza Box Italy Model : 36 x 36 x 4 cm", nameFR: "BoÃ®te Pizza Italy 36x36", price: 24, unit: "Packung" },
    { id: "NC-60", cat: "Packaging", nameDE: "Pizza Box Italy Model : 40 x 40 x 4 cm", nameFR: "BoÃ®te Pizza Italy 40x40", price: 38, unit: "Packung" },
    { id: "NC-61", cat: "Packaging", nameDE: "Pizza Box Italy Model : 45 x 45 x 4.5 cm", nameFR: "BoÃ®te Pizza Italy 45x45", price: 40, unit: "Packung" },
    { id: "NC-62", cat: "Packaging", nameDE: "Pizza Box, Italy model - 24 x 24 x 4 cm", nameFR: "BoÃ®te Pizza Italy 24x24", price: 20, unit: "Packung" },
    { id: "NC-63", cat: "Packaging", nameDE: "Pizza Box, Italy model - 28 x 28 x 4 cm", nameFR: "BoÃ®te Pizza Italy 28x28", price: 20, unit: "Packung" },
    { id: "NC-64", cat: "Packaging", nameDE: "Pizza Box, Italy model - 30 x 30 x 4 cm", nameFR: "BoÃ®te Pizza Italy 30x30", price: 21, unit: "Packung" },
    { id: "NC-65", cat: "Packaging", nameDE: "Pizza Box, Italy model - 33 x 33 x 4 cm", nameFR: "BoÃ®te Pizza Italy 33x33", price: 25, unit: "Packung" },
    { id: "NC-66", cat: "Packaging", nameDE: "Pizza Box, Italy model - 50 x 50 x 4.5 cm", nameFR: "BoÃ®te Pizza Italy 50x50", price: 40, unit: "Packung" },
    { id: "NC-67", cat: "Packaging", nameDE: "Pizza Calzone box - 30 x 16 x 10 cm", nameFR: "BoÃ®te Calzone 30x16", price: 25, unit: "Packung" },
    { id: "NC-68", cat: "Food", nameDE: "Pizza Tomatensauce", nameFR: "Sauce tomate Pizza", price: 30, unit: "Stk" },
    { id: "NC-69", cat: "Packaging", nameDE: "Pizza-Karton logo, chez Maina 32x32", nameFR: "BoÃ®te Pizza Maina 32x32", price: 27, unit: "Packung" },
    { id: "NC-70", cat: "Packaging", nameDE: "PlastiktÃ¼tenrollen, 24 stÃ¼ck", nameFR: "Rouleaux sacs plastique (24 pcs)", price: 45, unit: "Packung" },
    { id: "NC-71", cat: "Food", nameDE: "Pul Bieber", nameFR: "Piment Pul Biber", price: 20, unit: "Packung" },
    { id: "NC-72", cat: "Food", nameDE: "Remia Mayonnaise, 10 Kg", nameFR: "Mayonnaise Remia (10kg)", price: 25, unit: "Stk" },
    { id: "NC-73", cat: "Packaging", nameDE: "Sauceenschale, 50 ml", nameFR: "Pot sauce 50ml", price: 49.5, unit: "Packung" },
    { id: "NC-74", cat: "Packaging", nameDE: "Sauceenschalen,120 ml", nameFR: "Pot sauce 120ml", price: 49.5, unit: "Packung" },
    { id: "NC-75", cat: "Packaging", nameDE: "Sauceenschalen, 30 ml", nameFR: "Pot sauce 30ml", price: 49, unit: "Packung" },
    { id: "NC-76", cat: "Packaging", nameDE: "Sauceenschalen, 80 ml", nameFR: "Pot sauce 80ml", price: 40, unit: "Packung" },
    { id: "NC-77", cat: "Food", nameDE: "Scharf Sauce, 12 StÃ¼ck", nameFR: "Sauce piquante (12 pcs)", price: 49, unit: "Packung" },
    { id: "NC-78", cat: "Food", nameDE: "Scharf Sauce, 10Kg", nameFR: "Sauce piquante (10kg)", price: 25.45, unit: "Stk" },
    { id: "NC-79", cat: "Food", nameDE: "schwarzkÃ¼mmel", nameFR: "Cumin noir", price: 18, unit: "Packung" },
    { id: "NC-80", cat: "Food", nameDE: "Sumachpulver", nameFR: "Poudre Sumac", price: 18, unit: "Packung" },
    { id: "NC-81", cat: "Packaging", nameDE: "Toilettenpapier Rolle", nameFR: "Papier toilette", price: 26, unit: "Packung" },
    { id: "NC-82", cat: "Packaging", nameDE: "Wach papier", nameFR: "Papier cirÃ©", price: 45, unit: "Packung" },
    { id: "NC-83", cat: "Packaging", nameDE: "Lunch-Box-IP 9 WeiÃŸ -", nameFR: "Lunch Box IP 9 Blanc", price: 38, unit: "Packung" },
    { id: "NC-84", cat: "Packaging", nameDE: "Lunch-Box-IP 7 WeiÃŸ -", nameFR: "Lunch Box IP 7 Blanc", price: 33, unit: "Packung" },
    { id: "NC-85", cat: "Packaging", nameDE: "Lunch-Box-IP 6 WeiÃŸ -", nameFR: "Lunch Box IP 6 Blanc", price: 34, unit: "Packung" }
    ];

    const translations = {
        de: { view_cart: "Warenkorb >", checkout_title: "Bestellung prÃ¼fen", name: "Firmenname / Ihr Name", address: "Lieferadresse", date: "Lieferdatum", note: "Bemerkungen", upload: "Foto hochladen", items: "Artikel", whatsapp_msg: "Neue Bestellung:", email_sent: "Bestellung gesendet!", fill_all: "Bitte Namen eingeben!", all: "Alle" },
        fr: { view_cart: "Panier >", checkout_title: "VÃ©rifier la commande", name: "Nom de l'entreprise", address: "Adresse de livraison", date: "Date de livraison", note: "Remarques", upload: "TÃ©lÃ©charger photo", items: "Articles", whatsapp_msg: "Nouvelle commande :", email_sent: "Commande envoyÃ©e !", fill_all: "Nom requis !", all: "Tous" }
    };

    // --- Unit Translation Map ---
    const unitMap = {
        "Packung": { de: "Packung", fr: "Paquet" },
        "Pakung": { de: "Packung", fr: "Paquet" },
        "Pakung ": { de: "Packung", fr: "Paquet" },
        "Kg": { de: "Kg", fr: "Kg" },
        "Stk": { de: "Stk", fr: "Pcs" },
        "Box": { de: "Box", fr: "BoÃ®te" }
    };

    let cart = {};
    let currentLang = 'de';
    let currentCat = 'all';

    function init() { renderCategories(); renderProducts(); document.getElementById('deliveryDate').valueAsDate = new Date(); }

    function setLang(lang) {
        currentLang = lang;
        document.getElementById('btn-de').className = lang === 'de' ? 'active' : '';
        document.getElementById('btn-fr').className = lang === 'fr' ? 'active' : '';
        const t = translations[lang];
        
        document.getElementById('lbl-view-cart').innerText = t.view_cart;
        document.getElementById('lbl-checkout-title').innerText = t.checkout_title;
        document.getElementById('lbl-name').innerText = t.name;
        document.getElementById('lbl-address').innerText = t.address;
        document.getElementById('lbl-date').innerText = t.date;
        document.getElementById('lbl-note').innerText = t.note;
        document.getElementById('lbl-upload').innerText = t.upload + (lang === 'de' ? " (Nur Email)" : " (Email seulement)");

        document.getElementById('searchInput').placeholder = lang === 'de' ? "Suchen..." : "Rechercher...";
        renderCategories(); renderProducts();
    }

    function renderCategories() {
        const cats = [...new Set(products.map(p => p.cat))].sort();
        const container = document.getElementById('categoryFilters');
        const t = translations[currentLang];
        let html = `<button class="filter-btn ${currentCat === 'all' ? 'active' : ''}" onclick="filterCat('all')">${t.all}</button>`;
        cats.forEach(c => { html += `<button class="filter-btn ${currentCat === c ? 'active' : ''}" onclick="filterCat('${c}')">${c}</button>`; });
        container.innerHTML = html;
    }

    function filterCat(cat) { currentCat = cat; renderCategories(); filterProducts(); }

    function filterProducts() {
        const query = document.getElementById('searchInput').value.toLowerCase();
        const cards = document.querySelectorAll('.product-card');
        cards.forEach(card => {
            const cat = card.getAttribute('data-cat');
            const name = card.getAttribute('data-name').toLowerCase();
            const id = card.getAttribute('data-id').toLowerCase();
            const matchesSearch = name.includes(query) || id.includes(query);
            const matchesCat = currentCat === 'all' || currentCat === cat;
            if (matchesSearch && matchesCat) card.classList.remove('hidden'); else card.classList.add('hidden');
        });
    }

    function renderProducts() {
        const container = document.getElementById('product-list');
        container.innerHTML = "";
        products.forEach(p => {
            const name = currentLang === 'de' ? p.nameDE : p.nameFR;
            const qty = cart[p.id] || 0;
            const imgPath = `https://niksampack.github.io/images/${p.id}.jpg`;
            
            // Resolve Unit
            let unitLabel = p.unit;
            if (unitMap[p.unit]) {
                unitLabel = unitMap[p.unit][currentLang];
            }

            const html = `
            <div class="product-card ${qty > 0 ? 'in-cart' : ''}" data-cat="${p.cat}" data-name="${name}" data-id="${p.id}" id="card-${p.id}">
                <div class="prod-info">
                    <div class="prod-name">${name}</div>
                    <div class="prod-detail">
                        <span class="prod-code">#${p.id}</span>
                        <span class="prod-unit">${unitLabel}</span>
                    </div>
                    <div class="prod-price">${p.price.toFixed(2)}</div>
                </div>
                <div class="controls">
                    <button class="btn-qty" onclick="changeQty('${p.id}', -1)">-</button>
                    <input type="number" class="qty-input" id="qty-${p.id}" value="${qty > 0 ? qty : ''}" placeholder="0" onchange="manualQty('${p.id}', this.value)">
                    <button class="btn-qty" onclick="changeQty('${p.id}', 1)">+</button>
                </div>
            </div>`;
            container.innerHTML += html;
        });
    }

    function changeQty(id, delta) {
        if (!cart[id]) cart[id] = 0;
        cart[id] += delta;
        if (cart[id] <= 0) delete cart[id];
        updateUI(id);
    }

    function manualQty(id, val) {
        const num = parseInt(val);
        if (isNaN(num) || num <= 0) delete cart[id]; else cart[id] = num;
        updateUI(id);
    }

    function updateUI(id) {
        const input = document.getElementById(`qty-${id}`);
        const card = document.getElementById(`card-${id}`);
        if (input) input.value = cart[id] ? cart[id] : '';
        if (cart[id]) card.classList.add('in-cart'); else card.classList.remove('in-cart');
        updateCartBar();
    }

    function updateCartBar() {
        let total = 0; let count = 0;
        for (const [id, qty] of Object.entries(cart)) {
            const p = products.find(x => x.id === id);
            if(p) { total += p.price * qty; count += qty; }
        }
        const bar = document.getElementById('cartBar');
        if (count > 0) {
            bar.style.display = 'flex';
            document.getElementById('total-price').innerText = total.toFixed(2);
            document.getElementById('item-count').innerText = `${count} ${translations[currentLang].items}`;
        } else { bar.style.display = 'none'; }
    }

    function openCheckout() { renderCartSummary(); document.getElementById('checkoutModal').style.display = 'flex'; }
    function closeCheckout() { document.getElementById('checkoutModal').style.display = 'none'; }

    function renderCartSummary() {
        const div = document.getElementById('order-summary');
        div.innerHTML = "";
        let total = 0;
        for (const [id, qty] of Object.entries(cart)) {
            const p = products.find(x => x.id === id);
            const name = currentLang === 'de' ? p.nameDE : p.nameFR;
            const lineTotal = p.price * qty;
            total += lineTotal;
            div.innerHTML += `<div class="summary-row"><span style="font-weight:bold">${qty}x</span><span style="flex:1; margin:0 10px">${name} <small>(#${p.id})</small></span><span>${lineTotal.toFixed(2)}</span></div>`;
        }
        div.innerHTML += `<div style="text-align:right; font-weight:800; margin-top:15px; border-top:1px solid #ddd; padding-top:10px;">Total: ${total.toFixed(2)} CHF</div>`;
    }

    function getOrderText() {
        const name = document.getElementById('customerName').value;
        const address = document.getElementById('customerAddress').value;
        const date = document.getElementById('deliveryDate').value;
        const note = document.getElementById('customerNote').value;
        
        const t = translations[currentLang];
        let text = `*${t.whatsapp_msg}*\nðŸ‘¤ ${name}\nðŸ“ ${address}\nðŸ“… ${date}\n`;
        if(note) text += `ðŸ“ Note: ${note}\n`;
        text += `\n`;
        
        let total = 0;
        for (const [id, qty] of Object.entries(cart)) {
            const p = products.find(x => x.id === id);
            const pName = currentLang === 'de' ? p.nameDE : p.nameFR;
            
            // Resolve Unit
            let unitLabel = p.unit;
            if (unitMap[p.unit]) unitLabel = unitMap[p.unit][currentLang];
            
            text += `â–ªï¸ ${qty}x ${pName} (${unitLabel}) [Code:${p.id}]\n`;
            total += p.price * qty;
        }
        text += `\n*Total: ${total.toFixed(2)} CHF*`;
        return text;
    }

    function sendWhatsapp() {
        const name = document.getElementById('customerName').value;
        if (!name) return alert(translations[currentLang].fill_all);
        
        // *** 1. YOUR WHATSAPP NUMBER ***
        const myNumber = "41783249525"; 
        
        const text = encodeURIComponent(getOrderText());
        window.open(`https://wa.me/${myNumber}?text=${text}`, '_blank');
    }

    async function sendEmail() {
        const name = document.getElementById('customerName').value;
        if (!name) return alert(translations[currentLang].fill_all);
        const btn = document.querySelector('.btn-email');
        const oldText = btn.innerHTML;
        btn.disabled = true; btn.innerHTML = "...";
        try {
            const formData = new FormData();
            
            // *** 2. YOUR ACCESS KEY HERE ***
            formData.append("access_key", "01c92836-701d-4faf-91b9-3836ee825485"); 

            formData.append("subject", `Bestellung: ${name}`);
            formData.append("message", getOrderText());
            
            const fileInput = document.getElementById('orderAttachment');
            if(fileInput.files.length > 0) {
                formData.append("attachment", fileInput.files[0]);
            }

            const res = await fetch("https://api.web3forms.com/submit", { method: "POST", body: formData });
            if (res.ok) {
                alert(translations[currentLang].email_sent);
                closeCheckout();
                cart = {};
                document.getElementById('customerNote').value = "";
                document.getElementById('orderAttachment').value = "";
                products.forEach(p => updateUI(p.id));
            } else { alert("Error."); }
        } catch (e) { alert("Error."); }
        btn.disabled = false; btn.innerHTML = oldText;
    }

    init();
</script>
</body>
</html>
